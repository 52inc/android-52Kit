
/*
 * Copyright (c) 2017 52inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

task buildColors << {

    File output = new File("bw_colors.xml");
    if(output.exists()){
        output.delete()
    }else{
        output.createNewFile()
    }

    String resourceTemplate =
            "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
            "<resources>\n\n" +
                    "\t<!-- Black Colors -->\n" +
                    "%s" +
                    "\n" +
                    "\t<!-- White Colors -->\n" +
                    "%s" +
                    "\n" +
            "</resources>";

    // Generate Black colors
    StringBuilder blackColors = new StringBuilder();
    for (int i = 5; i < 100; i++) {
        int alpha = ((float) i / 100f) * 255f;
        String alphaHex = Integer.toHexString(alpha);
        if(alphaHex.length() == 1) alphaHex = String.format("0%s", alphaHex);
        String color = String.format("#%s%s", alphaHex, "000000");
        String colorRes = String.format("\t<color name=\"black%d\">%s</color>", i, color);
        blackColors.append(colorRes).append("\n");

        println "Generating Black(" + i + ") -> " + color
    }

    // Generate White colors
    StringBuilder whiteColors = new StringBuilder();
    for (int i = 5; i < 100; i++) {
        int alpha = ((float) i / 100f) * 255f;
        String alphaHex = Integer.toHexString(alpha);
        if(alphaHex.length() == 1) alphaHex = String.format("0%s", alphaHex);
        String color = String.format("#%s%s", alphaHex, "FFFFFF");
        String colorRes = String.format("\t<color name=\"white%d\">%s</color>", i, color);
        whiteColors.append(colorRes).append("\n");

        println "Generating White(" + i + ") -> " + color
    }

    // Build file
    String colors = String.format(resourceTemplate, blackColors.toString(), whiteColors.toString());

    FileWriter writer = new FileWriter(output);
    writer.write(colors);
    writer.close();

    println "Colors Generated!"

}